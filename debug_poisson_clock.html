<html>
  <head>
    <title>Poisson clock</title>
    <script>
      document.addEventListener("DOMContentLoaded", function(event)
      {

        function simple_hash(extinction_time)
        {
            var string_to_hash = extinction_time.toUTCString()
          
            var integer_array = string_to_hash.charCodeAt(0)
            var hash_sum = 0+integer_array
          
            //var hash_sum = 0
            //for (let i = 0; i < string_to_hash.length; i++)
            //{
            //  var hash_sum += string_to_hash[i]
            //}

            return hash_sum

            /*
            //40 species extinct a day
            var extinction_rate = 24*60*60/40

            var simulation_resolution = 1000

            var hash_value = hash_sum % simulation_resolution

            var exponential_distribution_sample = -1*Math.log(hash_value/simulation_resolution)/extinction_rate // natural log

            var poisson_delta_t = exponential_distribution_sample

            return poisson_delta_t
            */
        }
        /*
        function simulation_helper(extinction_time)
        {
          if extinction_time < new Date()
          {    
              var delta_t = simple_hash(extinction_time)
              return helper(new Date(extinction_time + 1000*delta_t))
          }
          else
          {
            return extinction_time
          }
        }
        */
        function every_second()
        {

            var hash = simple_hash(new Date())
          
            var simulation_first_extinction_time = new Date(new Date().getFullYear(), 0, 1);
            //var next_extinction_time=simulation_first_extinction_time//new Date(simulation_first_extinction_time+10)//simulation_helper(simulation_first_extinction_time)

            var temp_date = new Date()
            var next_extinction_string = temp_date.toString()
            document.getElementById("poisson_clock").innerHTML="<p>"+simulation_first_extinction_time+"</p><br><p>Time of next extinction:<br>"+next_extinction_string+"</p><p>"+hash.toString()+"</p>"
        }
        var myInterval = setInterval(every_second, 1000);
      
      })
    </script>
  </head>
  <body>
    <p id="poisson_clock"></p>
  </body>
</html>
