<html>
  <head>
    <title>Poisson clock</title>
    <script>
      document.addEventListener("DOMContentLoaded", function(event)
      {

        /*function simple_hash(extinction_time)
        {
            let string_to_hash = extinction_time.toUTCString();
            var hash_sum = 0
            for (let i = 0; i < string_to_hash.length; i++)
            {
              var hash_sum += string_to_hash[i]
            }

            //40 species extinct a day
            var extinction_rate = 24*60*60/40

            var simulation_resolution = 1000

            var hash_value = hash_sum % simulation_resolution

            var exponential_distribution_sample = -1*Math.log(hash_value/simulation_resolution)/extinction_rate // natural log

            var poisson_delta_t = exponential_distribution_sample

            return poisson_delta_t
          
        }
        function simulation_helper(extinction_time)
        {
          if extinction_time < new Date()
          {    
              var delta_t = simple_hash(extinction_time)
              return helper(new Date(extinction_time + 1000*delta_t))
          }
          else
          {
            return extinction_time
          }
        }
        */
        function every_second()
        {
            
            //var simulation_first_extinction_time = new Date(new Date().getFullYear(), 0, 1);
            //var next_extinction_time=simulation_first_extinction_time//new Date(simulation_first_extinction_time+10)//simulation_helper(simulation_first_extinction_time)

            //var next_extinction_string=next_extinction_time.toLocaleTimeString([], options || {
            var next_extinction_date=new Date()
            var next_extinction_string=next_extinction_date.toLocaleTimeString([], options || {
                year: "numeric",
                month: "long",
                day: "numeric",
                hour12: true,
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            })

            document.getElementById("poisson_clock").innerHTML=next_extinction_string //string.concat("<p>Time until next extinction:",next_extinction_string,"</p>"
        }
        var myInterval = setInterval(every_second, 1000);
      
      })
    </script>
  </head>
  <body>
    <p id="poisson_clock"></p>
  </body>
</html>
